<!DOCTYPE html>
<html>
    <head>
        <title>EvAccum</title>
    	<meta charset="utf-8"/>
        <!-- pull in axios so we can make post requests -->
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <!-- pull in JATOS resources -->
        <script src="/assets/javascripts/jatos.js"></script>
        <!-- pull in jsPsych resources -->
        <script src="jspsych-6.1.0/jspsych.js"></script>
        <script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
        <script src="jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js"></script>
        <script src="jspsych-6.1.0/plugins/jspsych-rdk.js"></script>
        <!-- pull in the experiment resources we need -->
        <script src="tools/credentials.js"></script>
    	<script src="tools/exp_stimulus_array_generator.js"></script>
    	<script src="tools/coh_stimulus_array_generator.js"></script>
    	<script src="tools/rule_stimulus_array_generator.js"></script>
        <!-- needs to be called after the generators, because this script uses them -->
        <script src="exp.js"></script>
        <!-- some additional styling to make the background black -->
        <link href="tools/exp.css" rel="stylesheet" type="text/css"></link>
        <style></style>
    </head>
    <body></body>
    <script>
		
		/*
		 * the experiment script is in exp.js (called in the head)
		 * so we don't need to maintain it twice for index.html and jatos.html
		*/

		/* initialise experiment */
		jatos.onLoad(function() {
			jsPsych.init({
				timeline: timeline,
				preload_images: cues.map(function(path) {return path.stimulus}), // get the path to the stimulus images (as an array) from the cues variable
				show_progress_bar: false,
				show_preload_progress_bar: false,
				on_finish: function() {
					var resultJson = jsPsych.data.get().json();
					jatos.submitResultData(resultJson, jatos.startNextComponent);
				}
			});
		});
    </script>
</html>
